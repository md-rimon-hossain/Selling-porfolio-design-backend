{
  "info": {
    "_postman_id": "5b02a7b2-3120-4365-a46c-1c22b8c26000",
    "name": "Ecommerce Design Selling API",
    "description": "Complete API collection for testing the ecommerce design selling platform with Zod validation",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
    "_exporter_id": "31502958"
  },
  "item": [
    {
      "name": "üè† Health Check",
      "item": [
        {
          "name": "Server Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/health",
            "description": "Check if the server is running"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üîê Authentication",
      "item": [
        {
          "name": "Register Admin User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('admin_token', response.data.token);",
                  "    pm.environment.set('user_id', response.data.user.id);",
                  "    pm.test('Admin registered successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "        pm.expect(response.data.user.role).to.eql('admin');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Admin User\",\n  \"email\": \"admin@gmail.com\",\n  \"password\": \"AdminPass123\",\n  \"confirmPassword\": \"AdminPass123\",\n  \"role\": \"admin\"\n}"
            },
            "url": "{{base_url}}/auth/register",
            "description": "Register a new admin user"
          },
          "response": []
        },
        {
          "name": "Register Customer User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [""],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"customer@gmail.com\",\n  \"password\": \"CustomerPass123\",\n  \"confirmPassword\": \"CustomerPass123\",\n  \"role\": \"customer\"\n}"
            },
            "url": "{{base_url}}/auth/register",
            "description": "Register a new customer user"
          },
          "response": []
        },
        {
          "name": "Login Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [""],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@gmail.com\",\n  \"password\": \"AdminPass123\"\n}"
            },
            "url": "{{base_url}}/auth/login",
            "description": "Login with admin credentials"
          },
          "response": []
        },
        {
          "name": "Login Customer",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('customer_token', response.data.token);",
                  "    pm.test('Customer login successful', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "        pm.expect(response.data.user.role).to.eql('customer');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"customer@gmail.com\",\n  \"password\": \"CustomerPass123\"\n}"
            },
            "url": "{{base_url}}/auth/login",
            "description": "Login with customer credentials"
          },
          "response": []
        },
        {
          "name": "‚ùå Invalid Registration - Validation Test",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Jo\",\n  \"email\": \"invalid-email\",\n  \"password\": \"weak\",\n  \"confirmPassword\": \"weak\"\n}"
            },
            "url": "{{base_url}}/auth/register",
            "description": "Test validation errors for invalid data"
          },
          "response": []
        },
        {
          "name": "‚ùå Invalid Login - Wrong Credentials",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"customer@gmail.com\",\n  \"password\": \"wrongpassword\"\n}"
            },
            "url": "{{base_url}}/auth/login",
            "description": "Test login with wrong credentials"
          },
          "response": []
        },
        {
          "name": "‚ùå Invalid json body",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"wrong@example.com\",\n  \"password\": \"wrongpassword // try with wrong json format missing coma\n}"
            },
            "url": "{{base_url}}/auth/login",
            "description": "Test login with wrong credentials"
          },
          "response": []
        },
        {
          "name": "logout user",
          "request": {
            "method": "POST",
            "header": [],
            "url": "{{base_url}}/auth/logout"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üìÇ Categories",
      "item": [
        {
          "name": "Get All Categories (Public)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/categories",
            "description": "Get all active categories - public endpoint"
          },
          "response": []
        },
        {
          "name": "Create Parent Category (Admin Only)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('category_id', response.data._id);",
                  "    pm.test('Category created successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Graphic Design\",\n  \"description\": \"Professional logo design services for businesses and startups\"\n//   \"parentCategory\": \"\"\n}"
            },
            "url": "{{base_url}}/categories",
            "description": "Create a new category (requires admin authentication)"
          },
          "response": []
        },
        {
          "name": "Create Another Category",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Web Design\",\n  \"description\": \"Modern and responsive web design templates and mockups\",\n  \"isActive\": true\n}"
            },
            "url": "{{base_url}}/categories",
            "description": "Create another category for testing"
          },
          "response": []
        },
        {
          "name": "Get Single Category",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {}
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/categories/{{category_id}}",
            "description": "Get a single category by ID"
          },
          "response": []
        },
        {
          "name": "Update Category (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Premium Logo Design\",\n  \"description\": \"Premium professional logo design services for businesses, startups, and personal brands\"\n}"
            },
            "url": "{{base_url}}/categories/{{category_id}}",
            "description": "Update an existing category"
          },
          "response": []
        },
        {
          "name": "‚ùå Create Category as Customer (Should Fail)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Unauthorized Category\",\n  \"description\": \"This should fail\"\n}"
            },
            "url": "{{base_url}}/categories",
            "description": "Test authorization - customer trying to create category should fail"
          },
          "response": []
        },
        {
          "name": "‚ùå Invalid Category Data",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"A\",\n  \"description\": \"Short\"\n}"
            },
            "url": "{{base_url}}/categories",
            "description": "Test validation with invalid data"
          },
          "response": []
        },
        {
          "name": "‚ùå Get Category with Invalid ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/categories/invalid-id",
            "description": "Test parameter validation with invalid ObjectId"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üé® Designs",
      "item": [
        {
          "name": "Get All Designs (Authenticated)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/designs",
            "description": "Get all active designs (requires authentication)"
          },
          "response": []
        },
        {
          "name": "Get Designs with Query Parameters",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": []
            },
            "url": {
              "raw": "{{base_url}}/designs?page=1&limit=10&complexityLevel=Intermediate&minPrice=50&maxPrice=200&category",
              "host": ["{{base_url}}"],
              "path": ["designs"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "complexityLevel",
                  "value": "Intermediate"
                },
                {
                  "key": "minPrice",
                  "value": "50"
                },
                {
                  "key": "maxPrice",
                  "value": "200"
                },
                {
                  "key": "category",
                  "value": null
                }
              ]
            },
            "description": "Get designs with filtering and pagination"
          },
          "response": []
        },
        {
          "name": "Create Design (Admin Only)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('design_id', response.data._id);",
                  "    pm.test('Design created successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Modern E-commerce App UI Kit\",\n  \"mainCategory\": \"65b9a4c0f8361b17b8f9e7d2\",\n  \"subCategory\": \"65b9a4c0f8361b17b8f9e7d3\",\n  \n  // üí° NEW FIELD: Reference to the User who created this design\n  \"creator\": \"65b9a4c0f8361b17b8f9e7c0\", \n  \n  \"designType\": \"UI Kit\",\n  \"includedFormats\": [\"FIG\", \"SKETCH\", \"XD\"],\n  \n  \"previewImageUrls\": [\n    \"https://res.cloudinary.com/your-cloud/image/upload/v1/previews/image1.png\",\n    \"https://res.cloudinary.com/your-cloud/image/upload/v1/previews/image2.png\"\n  ],\n  \"description\": \"A comprehensive UI kit for building modern mobile e-commerce applications.\",\n  \n  \"usedTools\": [\"Figma\", \"Photoshop\"],\n  \"effectsUsed\": [\"Shadows\", \"Gradients\"],\n  \n  \"basePrice\": 69.99,\n  \"discountedPrice\": 59.99,\n  \n  \"downloadableFile\": {\n    \"public_id\": \"designs/kits/ecommerce_full_v2\",\n    \"secure_url\": \"https://res.cloudinary.com/your-cloud/raw/upload/v1/source_files/ecommerce_kit_full.zip\",\n    \"file_format\": \"ZIP\",\n    \"file_size\": 25000000 // 25 MB\n  },\n  \n  \"processDescription\": \"Designed following Material Design principles with atomic design methodology.\",\n  \"complexityLevel\": \"Intermediate\",\n  \"tags\": [\"figma\", \"ui-kit\", \"e-commerce\", \"mobile-app\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{base_url}}/designs",
            "description": "Create a new design (requires admin authentication)"
          },
          "response": []
        },
        {
          "name": "Create Design (Admin Only) - multipart/form-data",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": { "token": "{{admin_token}}" }
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "title",
                  "value": "Modern E-commerce App UI Kit",
                  "type": "text"
                },
                {
                  "key": "mainCategory",
                  "value": "65b9a4c0f8361b17b8f9e7d2",
                  "type": "text"
                },
                {
                  "key": "subCategory",
                  "value": "65b9a4c0f8361b17b8f9e7d3",
                  "type": "text"
                },
                { "key": "designType", "value": "UI Kit", "type": "text" },
                {
                  "key": "includedFormats",
                  "value": "[\"FIG\",\"SKETCH\",\"XD\"]",
                  "type": "text"
                },
                {
                  "key": "description",
                  "value": "A comprehensive UI kit for building modern mobile e-commerce applications.",
                  "type": "text"
                },
                {
                  "key": "usedTools",
                  "value": "[\"Figma\",\"Photoshop\"]",
                  "type": "text"
                },
                {
                  "key": "effectsUsed",
                  "value": "[\"Shadows\",\"Gradients\"]",
                  "type": "text"
                },
                { "key": "basePrice", "value": "69.99", "type": "text" },
                { "key": "discountedPrice", "value": "59.99", "type": "text" },
                {
                  "key": "processDescription",
                  "value": "Designed following Material Design principles with atomic design methodology.",
                  "type": "text"
                },
                {
                  "key": "complexityLevel",
                  "value": "Intermediate",
                  "type": "text"
                },
                {
                  "key": "tags",
                  "value": "[\"figma\",\"ui-kit\",\"e-commerce\",\"mobile-app\"]",
                  "type": "text"
                },
                { "key": "previewImages", "type": "file", "src": [] },
                { "key": "files", "type": "file", "src": [] }
              ]
            },
            "url": "{{base_url}}/designs",
            "description": "Create a new design (requires admin authentication) - use 'previewImages' (file[]) for image previews and 'files' (file[]) for downloadable assets"
          },
          "response": []
        },
        {
          "name": "Create Another Design2 (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Creative Brand Identity Package\",\n  \"category\": \"{{category_id}}\",\n  \"description\": \"Complete brand identity package including logo, business cards, and brand guidelines for creative agencies.\",\n  \"previewImageUrl\": \"https://example.com/preview/brand-identity-package.jpg\",\n  \"designerName\": \"Mike Johnson\",\n  \"usedTools\": [\"Adobe Creative Suite\", \"Sketch\", \"InDesign\"],\n  \"effectsUsed\": [\"Color Harmony\", \"Typography Pairing\", \"Layout Design\"],\n  \"price\": 299.99,\n  \"processDescription\": \"This comprehensive brand identity project involved creating a cohesive visual system that reflects the client's creative values and market positioning.\",\n  \"complexityLevel\": \"Advanced\",\n  \"tags\": [\"branding\", \"identity\", \"creative\", \"package\", \"professional\"],\n  \"status\": \"Active\"\n}"
            },
            "url": "{{base_url}}/designs",
            "description": "Create another design for testing"
          },
          "response": []
        },
        {
          "name": "Get Single Design",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/designs/{{design_id}}",
            "description": "Get a single design by ID"
          },
          "response": []
        },
        {
          "name": "Update Design (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Premium Modern Corporate Logo\",\n  \"price\": 199.99,\n  \"description\": \"Updated description: A premium sleek and modern corporate logo design perfect for established tech companies and growing startups.\",\n  \"tags\": [\"logo\", \"corporate\", \"modern\", \"tech\", \"startup\", \"premium\"]\n}"
            },
            "url": "{{base_url}}/designs/{{design_id}}",
            "description": "Update an existing design"
          },
          "response": []
        },
        {
          "name": "‚ùå Create Design Invalid json",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"title\": \"Modern Corporate Logo\",\r\n  \"category\": \"{{category_id}}\",\r\n  \"description\": \"A sleek and modern corporate logo design perfect for tech companies and startups. Features clean lines and contemporary typography.\",\r\n  \"previewImageUrl\": \"https://example.com/preview/modern-corporate-logo.jpg\",\r\n  \"designerName\": \"Jane Smith\",\r\n  \"usedTools\": [\"Adobe Illustrator\", \"Photoshop\", \"Figma\"],\r\n  \"effectsUsed\": [\"Gradient\", \"Drop Shadow\", \"Typography Effects\"],\r\n  \"price\": 149.99,\r\n  \"processDescription\": \"The design process began with extensive research into modern corporate branding trends. Multiple concepts were developed and refined through client feedback iterations. The final design combines minimalist aesthetics with strong brand recognition elements.\",\r\n  \"complexityLevel\": \"Intermediate\",\r\n  \"tags\": [\"logo\", \"corporate\", \"modern\", \"tech\", \"startup\"],\r\n  \"status\": \"Active\",\r\n  \"likesCount\": 0\r\n  \"downloadCount\": 0\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{base_url}}/designs",
            "description": "Test authentication requirement - should fail without token"
          },
          "response": []
        },
        {
          "name": "‚ùå Create Design as Customer (Should Fail)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Unauthorized Design\",\n  \"category\": \"{{category_id}}\",\n  \"description\": \"This should fail\",\n  \"previewImageUrl\": \"https://example.com/test.jpg\",\n  \"designerName\": \"Customer User\",\n  \"usedTools\": [\"Paint\"],\n  \"effectsUsed\": [\"None\"],\n  \"price\": 10,\n  \"processDescription\": \"Simple process\",\n  \"complexityLevel\": \"Basic\",\n  \"tags\": [\"test\"]\n}"
            },
            "url": "{{base_url}}/designs",
            "description": "Test authorization - customer trying to create design should fail"
          },
          "response": []
        },
        {
          "name": "‚ùå Invalid Design Data",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Lo\",\n  \"category\": \"invalid-category-id\",\n  \"description\": \"Short\",\n  \"previewImageUrl\": \"not-a-url\",\n  \"price\": -10,\n  \"usedTools\": [],\n  \"effectsUsed\": [],\n  \"complexityLevel\": \"Invalid\"\n}"
            },
            "url": "{{base_url}}/designs",
            "description": "Test validation with invalid design data"
          },
          "response": []
        },
        {
          "name": "‚ùå Get Design with Invalid ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{auth_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/designs/invalid-design-id",
            "description": "Test parameter validation with invalid ObjectId"
          },
          "response": []
        },
        {
          "name": "Delete Design (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "DELETE",
            "header": [],
            "url": "{{base_url}}/designs/{{design_id}}",
            "description": "Delete a design (admin only) - Run this last to clean up"
          },
          "response": []
        },
        {
          "name": "‚ùå Design Query Validation Errors",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{auth_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/designs?page=0&limit=101&minPrice=invalid&maxPrice=not-a-number&complexityLevel=Invalid",
              "host": ["{{base_url}}"],
              "path": ["designs"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "limit",
                  "value": "101"
                },
                {
                  "key": "minPrice",
                  "value": "invalid"
                },
                {
                  "key": "maxPrice",
                  "value": "not-a-number"
                },
                {
                  "key": "complexityLevel",
                  "value": "Invalid"
                }
              ]
            },
            "description": "Test query parameter validation errors"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üö´ Error Handling Tests",
      "item": [
        {
          "name": "‚ùå Non-existent Route",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/non-existent-route",
            "description": "Should return 404 - Route not found"
          },
          "response": []
        },
        {
          "name": "‚ùå Wrong HTTP Method",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": "{{base_url}}/categories",
            "description": "Should return 404 - Method not allowed for this route"
          },
          "response": []
        },
        {
          "name": "‚ùå invalid JSON",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Category\",\n  \"description\": \"Valid description\"\n  // Missing comma and malformed JSON\n  \"isActive\": true\n}"
            },
            "url": "{{base_url}}/categories",
            "description": "Test malformed JSON handling"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üí∞ Pricing Plans",
      "item": [
        {
          "name": "Get Active Pricing Plans (Public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/pricing-plans/active",
            "description": "Get all active pricing plans - public endpoint"
          },
          "response": []
        },
        {
          "name": "Create Pricing Plan (Admin Only)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('pricing_plan_id', response.data._id);",
                  "    pm.test('Pricing Plan created successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Basic Plan\",\n  \"description\": \"Limited access to all premium features and designs\",\n  \"price\": 10.99,\n  \"features\": [\n    \"Premium support\",\n    \"Advanced analytics\",\n    \"Custom design requests\",\n    \"Priority queue\"\n  ],\n  \"duration\": \"1 month\",\n  \"maxDesigns\": 50,\n  \"maxDownloads\": 100,\n  \"priority\": 1,\n  \"isActive\": true,\n  \"discountPercentage\": 5,\n  \"validUntil\": \"2025-12-31T23:59:59.000Z\"\n}"
            },
            "url": "{{base_url}}/pricing-plans",
            "description": "Create a new pricing plan (requires admin authentication)"
          },
          "response": []
        },
        {
          "name": "Get All Pricing Plans (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/pricing-plans?page=1&limit=10&sortBy=priority&sortOrder=desc",
              "host": ["{{base_url}}"],
              "path": ["pricing-plans"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "sortBy",
                  "value": "priority"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            },
            "description": "Get all pricing plans with filtering and pagination (admin only)"
          },
          "response": []
        },
        {
          "name": "Get Single Pricing Plan",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/pricing-plans/{{pricing_plan_id}}",
            "description": "Get a single pricing plan by ID"
          },
          "response": []
        },
        {
          "name": "Update Pricing Plan (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Standard Plan Updated\",\n  \"price\": 60.99,\n  \"discountPercentage\": 15,\n  \"features\": [\n    \"1000 downloads\",\n    \"Premium support\",\n    \"Advanced analytics\",\n    \"Custom design requests\",\n    \"Priority queue\",\n    \"24/7 support\"\n  ]\n}"
            },
            "url": "{{base_url}}/pricing-plans/{{pricing_plan_id}}",
            "description": "Update an existing pricing plan"
          },
          "response": []
        },
        {
          "name": "Get Pricing Plan Analytics (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/pricing-plans/analytics/overview?startDate=2025-01-01&endDate=2025-12-31",
              "host": ["{{base_url}}"],
              "path": ["pricing-plans", "analytics", "overview"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2025-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2025-12-31"
                }
              ]
            },
            "description": "Get pricing plan analytics and statistics"
          },
          "response": []
        },
        {
          "name": "‚ùå Create Pricing Plan as Customer (Should Fail)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Unauthorized Plan\",\n  \"description\": \"This should fail\",\n  \"price\": 50,\n  \"features\": [\"Basic feature\"],\n  \"duration\": \"1 month\"\n}"
            },
            "url": "{{base_url}}/pricing-plans",
            "description": "Test authorization - customer trying to create pricing plan should fail"
          },
          "response": []
        },
        {
          "name": "‚ùå Invalid Pricing Plan Data",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"A\",\n  \"description\": \"Too short\",\n  \"price\": -10,\n  \"features\": [],\n  \"duration\": \"\",\n  \"discountPercentage\": 150\n}"
            },
            "url": "{{base_url}}/pricing-plans",
            "description": "Test validation with invalid pricing plan data"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üõí Purchases",
      "item": [
        {
          "name": "Create Individual Design Purchase",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('individual_purchase_id', response.data._id);",
                  "    pm.test('Individual purchase created successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"purchaseType\": \"individual\",\n  \"design\": \"{{design_id}}\",\n  \"paymentMethod\": \"credit_card\",\n  \"paymentDetails\": {\n    \"cardNumber\": \"**** **** **** 1234\",\n    \"expiryDate\": \"12/26\",\n    \"cvv\": \"***\",\n    \"cardholderName\": \"John Doe\"\n  },\n  \"billingAddress\": {\n    \"street\": \"123 Main Street\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10001\",\n    \"country\": \"USA\"\n  },\n  \"notes\": \"Individual design purchase\"\n}"
            },
            "url": "{{base_url}}/purchases",
            "description": "Purchase a specific design individually"
          },
          "response": []
        },
        {
          "name": "Create Subscription Purchase",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('subscription_purchase_id', response.data._id);",
                  "    pm.test('Subscription purchase created successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"purchaseType\": \"subscription\",\n  \"pricingPlan\": \"{{pricing_plan_id}}\",\n  \"paymentMethod\": \"credit_card\",\n  \"paymentDetails\": {\n    \"cardNumber\": \"**** **** **** 1234\",\n    \"expiryDate\": \"12/26\",\n    \"cvv\": \"***\",\n    \"cardholderName\": \"John Doe\"\n  },\n  \"billingAddress\": {\n    \"street\": \"123 Main Street\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10001\",\n    \"country\": \"USA\"\n  },\n  \"notes\": \"Premium subscription purchase\"\n}"
            },
            "url": "{{base_url}}/purchases",
            "description": "Purchase a subscription plan"
          },
          "response": []
        },
        {
          "name": "Get All Purchases (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/purchases?page=1&limit=10&status=pending&sortBy=createdAt&sortOrder=desc",
              "host": ["{{base_url}}"],
              "path": ["purchases"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "status",
                  "value": "pending"
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            },
            "description": "Get all purchases with filtering and pagination (admin only)"
          },
          "response": []
        },
        {
          "name": "Get My Purchases (Customer)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/purchases/my-purchases?page=1&limit=1&status=pending",
              "host": ["{{base_url}}"],
              "path": ["purchases", "my-purchases"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "1"
                },
                {
                  "key": "status",
                  "value": "pending"
                }
              ]
            },
            "description": "Get current user's purchases"
          },
          "response": []
        },
        {
          "name": "Check Subscription Eligibility",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/purchases/subscription-eligibility",
            "description": "Check if user can purchase a subscription (prevents duplicate subscriptions)"
          },
          "response": []
        },
        {
          "name": "Get Single Purchase",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/purchases/{{individual_purchase_id}}",
            "description": "Get a single purchase by ID"
          },
          "response": []
        },
        {
          "name": "Update Purchase Status (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"completed\",\n  \"adminNotes\": \"Purchase verified and approved. Payment confirmed.\"\n}"
            },
            "url": "{{base_url}}/purchases/{{individual_purchase_id}}/status",
            "description": "Update purchase status (admin only)"
          },
          "response": []
        },
        {
          "name": "Get Purchase Analytics (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/purchases/analytics?startDate=2025-01-01&endDate=2025-12-31&groupBy=month",
              "host": ["{{base_url}}"],
              "path": ["purchases", "analytics"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2025-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2025-12-31"
                },
                {
                  "key": "groupBy",
                  "value": "month"
                }
              ]
            },
            "description": "Get purchase analytics and statistics"
          },
          "response": []
        },
        {
          "name": "Cancel Purchase (Customer)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cancelReason\": \"Changed my mind about the purchase\"\n}"
            },
            "url": "{{base_url}}/purchases/{{individual_purchase_id}}",
            "description": "Cancel a purchase (customer or admin)"
          },
          "response": []
        },
        {
          "name": "‚ùå Create Purchase Without Authentication",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pricingPlan\": \"{{pricing_plan_id}}\",\n  \"paymentMethod\": \"credit_card\"\n}"
            },
            "url": "{{base_url}}/purchases",
            "description": "Test authentication requirement - should fail without token"
          },
          "response": []
        },
        {
          "name": "‚ùå Invalid Purchase Data",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pricingPlan\": \"invalid-plan-id\",\n  \"paymentMethod\": \"invalid-method\",\n  \"paymentDetails\": {\n    \"cardNumber\": \"123\"\n  }\n}"
            },
            "url": "{{base_url}}/purchases",
            "description": "Test validation with invalid purchase data"
          },
          "response": []
        }
      ]
    },
    {
      "name": "‚≠ê Reviews",
      "item": [
        {
          "name": "Create Review (Customer)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('review_id', response.data._id);",
                  "    pm.test('Review created successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"designId\":\"{{design_id}}\",\n  \"rating\": 5,\n  \"comment\": \"Absolutely fantastic design! The attention to detail is remarkable and the quality exceeds expectations. The modern aesthetic perfectly captures what I was looking for in a corporate logo. Highly recommended for any business looking for professional branding.\",\n  \"title\": \"Outstanding Modern Corporate Design\",\n  \"pros\": [\n    \"Clean and professional design\",\n    \"High-quality files provided\",\n    \"Excellent documentation\",\n    \"Easy to customize colors\",\n    \"Scalable vector format\"\n  ],\n  \"cons\": [\n    \"Could include more color variations\"\n  ],\n  \"wouldRecommend\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": "{{base_url}}/reviews",
            "description": "Create a new review for a design (requires customer authentication)"
          },
          "response": []
        },
        {
          "name": "Get All Reviews (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/reviews?page=1&limit=10&rating=5&sortBy=createdAt&sortOrder=desc",
              "host": ["{{base_url}}"],
              "path": ["reviews"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "rating",
                  "value": "5"
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            },
            "description": "Get all reviews with filtering and pagination (admin only)"
          },
          "response": []
        },
        {
          "name": "Get Design Reviews (Public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/reviews/design/{{design_id}}",
              "host": ["{{base_url}}"],
              "path": ["reviews", "design", "{{design_id}}"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "disabled": true
                },
                {
                  "key": "limit",
                  "value": "10",
                  "disabled": true
                },
                {
                  "key": "sortBy",
                  "value": "helpful",
                  "disabled": true
                },
                {
                  "key": "sortOrder",
                  "value": "desc",
                  "disabled": true
                }
              ]
            },
            "description": "Get all reviews for a specific design - public endpoint"
          },
          "response": []
        },
        {
          "name": "Get Single Review",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/reviews/{{review_id}}",
            "description": "Get a single review by ID"
          },
          "response": []
        },
        {
          "name": "Update Review (Owner)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Great Design with Minor Improvements Needed\",\n  \"rating\": 4,\n  \"comment\": \"Updated review: Still a great design with minor improvements needed. Overall very satisfied with the purchase and would buy again.\"\n}"
            },
            "url": "{{base_url}}/reviews/{{review_id}}",
            "description": "Update an existing review (owner or admin only)"
          },
          "response": []
        },
        {
          "name": "Mark Review as Helpful (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isHelpful\": true\n}"
            },
            "url": "{{base_url}}/reviews/{{review_id}}/helpful",
            "description": "Mark a review as helpful or not helpful"
          },
          "response": []
        },
        {
          "name": "Get Review Analytics (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/reviews/analytics?startDate=2025-01-01&endDate=2025-12-31&designId={{design_id}}",
              "host": ["{{base_url}}"],
              "path": ["reviews", "analytics"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2025-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2025-12-31"
                },
                {
                  "key": "designId",
                  "value": "{{design_id}}"
                }
              ]
            },
            "description": "Get review analytics and statistics"
          },
          "response": []
        },
        {
          "name": "Delete Review (Owner/Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "DELETE",
            "header": [],
            "url": "{{base_url}}/reviews/68edf7ae4c21c72b42d5f2e9",
            "description": "Delete a review (owner or admin only)"
          },
          "response": []
        },
        {
          "name": "‚ùå Create Duplicate Review (Should Fail)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"design\": \"{{design_id}}\",\n  \"rating\": 3,\n  \"comment\": \"This should fail as user already reviewed this design\"\n}"
            },
            "url": "{{base_url}}/reviews",
            "description": "Test duplicate review prevention - should fail if user already reviewed this design"
          },
          "response": []
        },
        {
          "name": "‚ùå Mark Own Review as Helpful (Should Fail)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isHelpful\": true\n}"
            },
            "url": "{{base_url}}/reviews/{{review_id}}/helpful",
            "description": "Test self-helpfulness prevention - should fail when user tries to mark own review as helpful"
          },
          "response": []
        },
        {
          "name": "‚ùå Invalid Review Data",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"design\": \"invalid-design-id\",\n  \"rating\": 6,\n  \"comment\": \"Short\",\n  \"title\": \"A\"\n}"
            },
            "url": "{{base_url}}/reviews",
            "description": "Test validation with invalid review data"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üì• Downloads",
      "item": [
        {
          "name": "Get Subscription Status",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/downloads/subscription-status",
            "description": "Get current user's subscription status and remaining downloads"
          },
          "response": []
        },
        {
          "name": "Download Design (Individual Purchase)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [],
            "url": "{{base_url}}/downloads/design/{{design_id}}",
            "description": "Download a design that was purchased individually"
          },
          "response": []
        },
        {
          "name": "Download Design (Subscription)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [],
            "url": "{{base_url}}/downloads/design/{{design_id}}",
            "description": "Download a design using active subscription (if available downloads remain)"
          },
          "response": []
        },
        {
          "name": "Get My Downloads",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/downloads/my-downloads?page=1&limit=10&sortBy=downloadDate&sortOrder=desc",
              "host": ["{{base_url}}"],
              "path": ["downloads", "my-downloads"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "sortBy",
                  "value": "downloadDate"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            },
            "description": "Get user's download history"
          },
          "response": []
        },
        {
          "name": "Get Download Analytics (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/downloads/analytics?period=monthly&startDate=2025-01-01T00:00:00.000Z&endDate=2025-12-31T23:59:59.000Z",
              "host": ["{{base_url}}"],
              "path": ["downloads", "analytics"],
              "query": [
                {
                  "key": "period",
                  "value": "monthly"
                },
                {
                  "key": "startDate",
                  "value": "2025-01-01T00:00:00.000Z"
                },
                {
                  "key": "endDate",
                  "value": "2025-12-31T23:59:59.000Z"
                }
              ]
            },
            "description": "Get download analytics and statistics (admin only)"
          },
          "response": []
        },
        {
          "name": "‚ùå Download Without Permission",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [],
            "url": "{{base_url}}/downloads/design/{{design_id}}",
            "description": "Test download without purchase or active subscription - should fail"
          },
          "response": [
            {
              "name": "‚ùå Download Without Permission",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "url": "{{base_url}}/downloads/design/{{design_id}}"
              },
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": null,
              "header": [
                {
                  "key": "X-Powered-By",
                  "value": "Express"
                },
                {
                  "key": "Access-Control-Allow-Origin",
                  "value": "*"
                },
                {
                  "key": "Content-Type",
                  "value": "application/json; charset=utf-8"
                },
                {
                  "key": "Content-Length",
                  "value": "121"
                },
                {
                  "key": "ETag",
                  "value": "W/\"79-DzIZruDqixLgMA/TbZLXkQCQuH4\""
                },
                {
                  "key": "Date",
                  "value": "Thu, 09 Oct 2025 04:33:21 GMT"
                },
                {
                  "key": "Connection",
                  "value": "keep-alive"
                },
                {
                  "key": "Keep-Alive",
                  "value": "timeout=5"
                }
              ],
              "cookie": [],
              "body": "{\n    \"success\": false,\n    \"message\": \"You need to purchase this design individually or have an active subscription to download it\"\n}"
            }
          ]
        },
        {
          "name": "‚ùå Download with Expired Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [],
            "url": "{{base_url}}/downloads/design/{{design_id}}",
            "description": "Test download with expired subscription - should fail"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üî¨ Hybrid System Tests",
      "item": [
        {
          "name": "‚ùå Try Duplicate Individual Purchase",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"purchaseType\": \"individual\",\n  \"design\": \"{{design_id}}\",\n  \"paymentMethod\": \"credit_card\",\n  \"billingAddress\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10001\",\n    \"country\": \"USA\"\n  }\n}"
            },
            "url": "{{base_url}}/purchases",
            "description": "Try to purchase same design twice - should fail with 409"
          },
          "response": []
        },
        {
          "name": "‚ùå Try Duplicate Subscription",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"purchaseType\": \"subscription\",\n  \"pricingPlan\": \"{{pricing_plan_id}}\",\n  \"paymentMethod\": \"credit_card\",\n  \"billingAddress\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10001\",\n    \"country\": \"USA\"\n  }\n}"
            },
            "url": "{{base_url}}/purchases",
            "description": "Try to create second subscription - should fail with DUPLICATE_SUBSCRIPTION error"
          },
          "response": []
        },
        {
          "name": "‚úÖ Check Subscription Eligibility (Should Fail)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/purchases/subscription-eligibility",
            "description": "Check subscription eligibility when user already has subscription - should return canPurchaseSubscription: false"
          },
          "response": []
        },
        {
          "name": "‚ùå Download with No Downloads Remaining",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [],
            "url": "{{base_url}}/downloads/design/{{design_id}}",
            "description": "Try to download when subscription has no downloads remaining - should fail"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "get-myProfile",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/users/myProfile"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üí≥ Payments (Stripe Integration)",
      "item": [
        {
          "name": "Create Payment Intent for Design",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseData = pm.response.json();",
                  "    if (responseData.data && responseData.data.paymentIntentId) {",
                  "        pm.environment.set('payment_intent_id', responseData.data.paymentIntentId);",
                  "        pm.environment.set('client_secret', responseData.data.clientSecret);",
                  "        console.log('Payment Intent ID saved:', responseData.data.paymentIntentId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productType\": \"design\",\n  \"productId\": \"{{design_id}}\",\n  \"currency\": \"usd\"\n}"
            },
            "url": "{{base_url}}/payments/create",
            "description": "Create a payment intent for a design purchase. Returns clientSecret for frontend Stripe integration."
          },
          "response": []
        },
        {
          "name": "Create Payment Intent for Course",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseData = pm.response.json();",
                  "    if (responseData.data && responseData.data.paymentIntentId) {",
                  "        pm.environment.set('course_payment_intent_id', responseData.data.paymentIntentId);",
                  "        console.log('Course Payment Intent ID saved:', responseData.data.paymentIntentId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productType\": \"course\",\n  \"productId\": \"{{course_id}}\",\n  \"currency\": \"usd\"\n}"
            },
            "url": "{{base_url}}/payments/create",
            "description": "Create a payment intent for a course purchase"
          },
          "response": []
        },
        {
          "name": "Create Payment Intent for Subscription",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseData = pm.response.json();",
                  "    if (responseData.data && responseData.data.paymentIntentId) {",
                  "        pm.environment.set('subscription_payment_intent_id', responseData.data.paymentIntentId);",
                  "        console.log('Subscription Payment Intent ID saved:', responseData.data.paymentIntentId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productType\": \"subscription\",\n  \"productId\": \"{{pricing_plan_id}}\",\n  \"currency\": \"usd\"\n}"
            },
            "url": "{{base_url}}/payments/create",
            "description": "Create a payment intent for a subscription purchase"
          },
          "response": []
        },
        {
          "name": "Get Payment Status",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/payments/status/{{payment_intent_id}}",
            "description": "Get payment status by payment intent ID. Shows payment details and linked purchase if completed."
          },
          "response": []
        },
        {
          "name": "Get My Payments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/payments/my-payments",
            "description": "Get authenticated user's payment history with product details"
          },
          "response": []
        },
        {
          "name": "Refund Payment (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"paymentIntentId\": \"{{payment_intent_id}}\",\n  \"reason\": \"Customer requested refund - not satisfied with product\"\n}"
            },
            "url": "{{base_url}}/payments/refund",
            "description": "Process a refund for a payment (Admin only). Updates both Payment and Purchase records."
          },
          "response": []
        },
        {
          "name": "Partial Refund Payment (Admin Only)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"paymentIntentId\": \"{{payment_intent_id}}\",\n  \"amount\": 2500,\n  \"reason\": \"Partial refund - promotional compensation\"\n}"
            },
            "url": "{{base_url}}/payments/refund",
            "description": "Process a partial refund (amount in cents). If amount is not specified, full refund is processed."
          },
          "response": []
        },
        {
          "name": "Webhook Handler (Test - Stripe Simulation)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "stripe-signature",
                "value": "test_signature_from_stripe_cli",
                "description": "In real scenario, this is generated by Stripe"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"evt_test_webhook\",\n  \"object\": \"event\",\n  \"type\": \"payment_intent.succeeded\",\n  \"data\": {\n    \"object\": {\n      \"id\": \"{{payment_intent_id}}\",\n      \"object\": \"payment_intent\",\n      \"amount\": 2999,\n      \"currency\": \"usd\",\n      \"status\": \"succeeded\"\n    }\n  }\n}"
            },
            "url": "{{base_url}}/payments/webhook",
            "description": "‚ö†Ô∏è This endpoint is for Stripe webhooks only. In production, only Stripe can call this endpoint. Use Stripe CLI for local testing: `stripe trigger payment_intent.succeeded`"
          },
          "response": []
        },
        {
          "name": "‚ùå Create Payment Without Authentication",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productType\": \"design\",\n  \"productId\": \"{{design_id}}\",\n  \"currency\": \"usd\"\n}"
            },
            "url": "{{base_url}}/payments/create",
            "description": "Test authentication requirement - should fail without token"
          },
          "response": []
        },
        {
          "name": "‚ùå Create Payment with Invalid Product Type",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productType\": \"invalid_type\",\n  \"productId\": \"{{design_id}}\",\n  \"currency\": \"usd\"\n}"
            },
            "url": "{{base_url}}/payments/create",
            "description": "Test validation - invalid product type should fail"
          },
          "response": []
        },
        {
          "name": "‚ùå Create Payment with Invalid Product ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productType\": \"design\",\n  \"productId\": \"invalid_object_id\",\n  \"currency\": \"usd\"\n}"
            },
            "url": "{{base_url}}/payments/create",
            "description": "Test validation - invalid ObjectId should fail"
          },
          "response": []
        },
        {
          "name": "‚ùå Create Payment for Non-existent Product",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productType\": \"design\",\n  \"productId\": \"507f1f77bcf86cd799439011\",\n  \"currency\": \"usd\"\n}"
            },
            "url": "{{base_url}}/payments/create",
            "description": "Test with valid ObjectId format but non-existent product - should fail"
          },
          "response": []
        },
        {
          "name": "‚ùå Get Payment Status - Unauthorized",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/payments/status/{{payment_intent_id}}",
            "description": "Test authorization - user trying to view another user's payment (only admin or payment owner can view)"
          },
          "response": []
        },
        {
          "name": "‚ùå Refund as Customer (Should Fail)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{customer_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"paymentIntentId\": \"{{payment_intent_id}}\",\n  \"reason\": \"Customer trying to refund\"\n}"
            },
            "url": "{{base_url}}/payments/refund",
            "description": "Test authorization - only admin can process refunds"
          },
          "response": []
        },
        {
          "name": "‚ùå Refund with Invalid Payment Intent ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{admin_token}}"
              }
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"paymentIntentId\": \"pi_invalid_id_12345\",\n  \"reason\": \"Test refund\"\n}"
            },
            "url": "{{base_url}}/payments/refund",
            "description": "Test with invalid payment intent ID - should fail"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üß™ Payment Flow Testing",
      "item": [
        {
          "name": "1Ô∏è‚É£ Complete Flow: Design Purchase",
          "item": [
            {
              "name": "Step 1: Create Payment Intent",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Payment intent created', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const responseData = pm.response.json();",
                      "    pm.expect(responseData.success).to.be.true;",
                      "    pm.expect(responseData.data).to.have.property('paymentIntentId');",
                      "    pm.expect(responseData.data).to.have.property('clientSecret');",
                      "    ",
                      "    // Save for next steps",
                      "    pm.environment.set('test_payment_intent_id', responseData.data.paymentIntentId);",
                      "    console.log('‚úÖ Step 1: Payment Intent Created -', responseData.data.paymentIntentId);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": {
                    "token": "{{customer_token}}"
                  }
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"productType\": \"design\",\n  \"productId\": \"{{design_id}}\",\n  \"currency\": \"usd\"\n}"
                },
                "url": "{{base_url}}/payments/create"
              },
              "response": []
            },
            {
              "name": "Step 2: Check Payment Status (Pending)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Payment status is pending', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const responseData = pm.response.json();",
                      "    pm.expect(responseData.data.status).to.eql('pending');",
                      "    console.log('‚úÖ Step 2: Payment Status -', responseData.data.status);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": {
                    "token": "{{customer_token}}"
                  }
                },
                "method": "GET",
                "header": [],
                "url": "{{base_url}}/payments/status/{{test_payment_intent_id}}"
              },
              "response": []
            },
            {
              "name": "Step 3: Simulate Webhook (Payment Success)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Webhook processed successfully', function () {",
                      "    pm.response.to.have.status(200);",
                      "    console.log('‚úÖ Step 3: Webhook Received');",
                      "    console.log('‚ö†Ô∏è NOTE: In local development, use Stripe CLI:');",
                      "    console.log('   stripe trigger payment_intent.succeeded');",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"id\": \"evt_test\",\n  \"type\": \"payment_intent.succeeded\",\n  \"data\": {\n    \"object\": {\n      \"id\": \"{{test_payment_intent_id}}\"\n    }\n  }\n}"
                },
                "url": "{{base_url}}/payments/webhook",
                "description": "‚ö†Ô∏è In production, use: stripe listen --forward-to localhost:5000/api/payments/webhook"
              },
              "response": []
            },
            {
              "name": "Step 4: Verify Payment Succeeded",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Payment succeeded and purchase created', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const responseData = pm.response.json();",
                      "    pm.expect(responseData.data.status).to.eql('succeeded');",
                      "    pm.expect(responseData.data).to.have.property('purchaseId');",
                      "    console.log('‚úÖ Step 4: Payment Succeeded');",
                      "    console.log('‚úÖ Purchase ID:', responseData.data.purchaseId);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": {
                    "token": "{{customer_token}}"
                  }
                },
                "method": "GET",
                "header": [],
                "url": "{{base_url}}/payments/status/{{test_payment_intent_id}}"
              },
              "response": []
            },
            {
              "name": "Step 5: Verify Download Access",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('User can download the design', function () {",
                      "    pm.response.to.have.status(200);",
                      "    console.log('‚úÖ Step 5: Download Access Granted');",
                      "    console.log('üéâ COMPLETE FLOW TEST PASSED!');",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": {
                    "token": "{{customer_token}}"
                  }
                },
                "method": "POST",
                "header": [],
                "url": "{{base_url}}/downloads/design/{{design_id}}"
              },
              "response": []
            }
          ],
          "description": "Complete end-to-end payment flow test: Create payment ‚Üí Check status ‚Üí Webhook ‚Üí Verify purchase ‚Üí Download"
        },
        {
          "name": "2Ô∏è‚É£ Stripe CLI Testing Guide",
          "item": [
            {
              "name": "README - How to Test Webhooks",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/payments/webhook",
                  "host": ["{{base_url}}"],
                  "path": ["payments", "webhook"]
                },
                "description": "# üß™ Testing Payment Webhooks with Stripe CLI\n\n## Prerequisites\n‚úÖ Stripe CLI installed and authenticated\n‚úÖ Webhook listener running\n‚úÖ Development server running on localhost:5000\n\n## Steps to Test:\n\n### 1. Start Webhook Listener\n```powershell\nstripe listen --forward-to http://localhost:5000/api/payments/webhook\n```\n\n### 2. Copy Webhook Secret\nThe CLI will output something like:\n```\n> Ready! Your webhook signing secret is whsec_xxxxx\n```\nAdd this to your `.env` file:\n```\nSTRIPE_WEBHOOK_SECRET=whsec_xxxxx\n```\n\n### 3. Restart Your Server\nThe server needs to restart to load the new webhook secret.\n\n### 4. Test Webhook Events\n\n**Successful Payment:**\n```powershell\nstripe trigger payment_intent.succeeded\n```\n\n**Failed Payment:**\n```powershell\nstripe trigger payment_intent.payment_failed\n```\n\n**Refunded Payment:**\n```powershell\nstripe trigger charge.refunded\n```\n\n### 5. Monitor Server Logs\nWatch your server console for:\n```\nüí∞ Payment succeeded: pi_xxxxx\n‚úÖ Purchase created: 6735xxxxx\n```\n\n### 6. Verify in MongoDB\nCheck that:\n- Payment record created with `status: \"succeeded\"`\n- Purchase record created and linked\n- User has access to the product\n\n## Troubleshooting\n\n‚ùå **\"Webhook signature verification failed\"**\n- Ensure STRIPE_WEBHOOK_SECRET is correct\n- Restart server after updating .env\n\n‚ùå **\"No webhook secret provided\"**\n- Add STRIPE_WEBHOOK_SECRET to .env file\n\n‚ùå **\"stripe command not found\"**\n- Install Stripe CLI: https://stripe.com/docs/stripe-cli\n\n## Production Setup\n\n1. Go to Stripe Dashboard ‚Üí Developers ‚Üí Webhooks\n2. Add endpoint: `https://your-domain.com/api/payments/webhook`\n3. Select events: `payment_intent.succeeded`, `payment_intent.payment_failed`, `charge.refunded`\n4. Copy webhook signing secret\n5. Update production .env with live webhook secret\n\n---\n\n**üìñ More Info:** See PAYMENT_TESTING_GUIDE.md in project root"
              },
              "response": []
            }
          ]
        }
      ],
      "description": "End-to-end payment flow testing scenarios with Stripe CLI integration"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": {
      "token": "{{auth_token}}"
    }
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "requests": {},
        "exec": [
          "// Pre-request script to set up environment variables if needed",
          "if (!pm.environment.get('base_url')) {",
          "    pm.environment.set('base_url', 'http://localhost:5000/api');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "requests": {},
        "exec": [
          "// Global test script",
          "pm.test('Response time is reasonable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "if (pm.response.code !== 404 && pm.response.code !== 500) {",
          "    pm.test('Response has proper content type', function () {",
          "        pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "    });",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000/api"
    },
    {
      "key": "admin_token",
      "value": ""
    },
    {
      "key": "customer_token",
      "value": ""
    },
    {
      "key": "user_id",
      "value": ""
    },
    {
      "key": "design_id",
      "value": ""
    },
    {
      "key": "category_id",
      "value": ""
    },
    {
      "key": "pricing_plan_id",
      "value": ""
    },
    {
      "key": "purchase_id",
      "value": ""
    },
    {
      "key": "review_id",
      "value": ""
    },
    {
      "key": "payment_intent_id",
      "value": "",
      "description": "Stripe Payment Intent ID for payment tracking"
    },
    {
      "key": "client_secret",
      "value": "",
      "description": "Stripe client secret for frontend payment confirmation"
    },
    {
      "key": "course_payment_intent_id",
      "value": "",
      "description": "Payment Intent ID for course purchases"
    },
    {
      "key": "subscription_payment_intent_id",
      "value": "",
      "description": "Payment Intent ID for subscription purchases"
    },
    {
      "key": "test_payment_intent_id",
      "value": "",
      "description": "Payment Intent ID for testing complete flow"
    },
    {
      "key": "course_id",
      "value": "",
      "description": "Course ID for course-related tests"
    }
  ]
}
